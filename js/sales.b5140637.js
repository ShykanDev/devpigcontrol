"use strict";(self["webpackChunkquick_flow"]=self["webpackChunkquick_flow"]||[]).push([[189],{8362:function(e,t,s){s.d(t,{C:function(){return a}});var l=s(5234);const a=(0,l.nY)("UseBackupHistorySales",{state(){return{allBackupsHistorySales:[],allBackupsHistoryExpenses:[]}},getters:{getBackupsSalesHistory(){return this.allBackupsHistorySales},getBackupsExpensesHistory(){return this.allBackupsHistoryExpenses}},actions:{pushNewBackupSale(e){this.allBackupsHistorySales.unshift(e)},pushNewBackupExpense(e){this.allBackupsHistoryExpenses.unshift(e)}},persist:!0})},361:function(e,t,s){s.d(t,{A:function(){return u}});var l=s(6768),a=s(144);const o={class:"flex justify-center card"};var n={__name:"PieChart",props:{labels:{type:Array,required:!0,default:()=>["Ingresos Totales","Gastos Totales","Balance Final"]},dataSet:{type:Array,required:!0,default:()=>[1e4,1e3,9e3]}},setup(e){const t=e,s=(0,a.KR)(),n=(0,a.KR)({responsive:!0,maintainAspectRatio:!1}),r=(0,a.KR)(),u=(0,a.KR)(),i=()=>{const e=t.labels.length;return 2===e?(r.value=["#db3c30","#3eb489"],u.value=["#e02d2d","#2ecc71"]):3===e&&(r.value=["#0369A1","#f44336","#2e7d32"],u.value=["#027abd","#e02d2d","#1b5e20"]),{labels:t.labels,datasets:[{data:t.dataSet,backgroundColor:r.value,hoverBackgroundColor:u.value}]}},c=()=>{const e=getComputedStyle(document.documentElement),t=e.getPropertyValue("--p-text-color");return{plugins:{legend:{labels:{usePointStyle:!0,color:t}}}}};return(0,l.sV)((()=>{s.value=i(),n.value=c()})),(e,t)=>{const a=(0,l.g2)("PrimeChart");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(a,{type:"pie",data:s.value,options:n.value,class:"w-52 sm:w-[18rem]"},null,8,["data","options"])])}}};const r=n;var u=r},8739:function(e,t,s){s.r(t),s.d(t,{default:function(){return ce}});s(4114);var l=s(6768),a=s(4232),o=s(144),n=s(5130),r=s(3443),u=s(489),i=s(8362),c=s(9148),d=s.n(c),p=s(638),m=s(361);const x={class:""},f=(0,l.Lk)("div",{class:"fixed top-0 bottom-0 left-0 right-0 bg-slate-100 -z-20"},null,-1),k={class:"flex flex-col w-full gap-4 min-h-dvh pb-9 animate-fade-down"},v=(0,l.Lk)("h1",{class:"text-3xl font-medium font-poppins text-sky-800"},"Ventas",-1),y={class:"flex justify-end pr-3"},g={class:"p-1 px-2 text-lg font-medium bg-white shadow-md text-sky-800 rounded-2xl font-poppins"},h=(0,l.Lk)("h2",{class:"text-xl font-"},"Ir al inicio",-1),b={class:"flex items-center pl-3"},w={class:"flex p-1 bg-white shadow-md rounded-2xl"},E=(0,l.Lk)("h2",{class:"text-lg font-medium text-sky-800"},"Ingresos Netos: ",-1),R={class:"flex items-center pl-2 text-lg font-medium justify-left font-poppins"},C={key:0,class:"pr-2 text-xl text-sky-800"},L={key:1,class:"pr-2 text-xl text-sky-800"},S={class:"flex items-center pl-3"},X=(0,l.Lk)("h2",{class:"text-lg font-medium text-sky-800"},"Ver Informacion detallada",-1),H={class:"flex items-center pl-2 text-lg justify-left font-poppins"},B={class:"flex items-center justify-center w-[98%]"},Q={key:0,class:"box-border w-full py-2 bg-white shadow-md rounded-2xl animate-fade-up"},K={class:"flex flex-wrap items-center justify-center w-full gap-1"},_={class:"flex items-center gap-2 px-1 ml-1 text-lg text-white bg-red-800 rounded-2xl justify-left font-poppins"},N=(0,l.Lk)("h2",{class:"text-lg font-medium text-white"},"Gastos: ",-1),j={key:0,class:"text-xl font-medium"},A={key:1,class:"text-xl font-medium"},F={class:"flex items-center gap-2 ml-2 text-lg justify-left font-poppins text-white bg-[#3EB489] rounded-2xl px-1"},T=(0,l.Lk)("h2",{class:"text-lg font-medium"},"Balance Final: ",-1),D={key:0,class:"text-xl font-medium"},U={key:1,class:"text-xl font-medium"},$={class:"flex flex-col items-start w-full gap-2 ml-5 text-lg font-poppins"},V={class:"flex items-center gap-2"},G=(0,l.Lk)("h2",{class:"text-lg font-medium text-sky-800"},"Agregar Gasto",-1),I={key:0,class:"flex flex-col items-start gap-2 animate-fade-right"},W=(0,l.Lk)("h2",{class:"text-lg font-medium text-sky-800"},"Motivo",-1),M=(0,l.Lk)("h2",{class:"text-lg font-medium text-sky-800"},"Gasto",-1),Y={class:"flex items-center bg-white shadow-sm"},q=(0,l.Lk)("p",null,"$",-1),P={key:0,class:"px-1 text-xl font-medium text-white rounded-xl bg-sky-700 animate-jump"},J={key:1,class:"text-sm font-semibold text-red-700"},O={class:"flex flex-wrap justify-center gap-5"},z={class:"absolute top-1 right-1"},Z={class:"text-sm font-medium text-sky-800"},ee={key:0,class:"flex flex-wrap items-center justify-start w-full gap-1"},te={key:0,class:"text-lg font-medium text-sky-700"},se={key:1,class:"text-lg font-medium text-sky-700"},le={key:2,class:"text-lg font-medium underline text-sky-900"},ae={key:1,class:"flex flex-wrap items-center justify-start w-full gap-1"},oe={key:0,class:"text-lg font-medium text-sky-700"},ne={key:1,class:"text-lg font-medium underline text-sky-900"},re={class:"pt-2 text-xl font-bold text-sky-900"};var ue=(0,l.pM)({__name:"SalesView",setup(e){let t=(0,o.KR)(d()().format("hh:mm:ss")),s=()=>{t.value=d()().format("hh:mm")},c=setInterval(s,1e3);(0,l.hi)((()=>{clearInterval(c)}));const ue=(0,u.t)();let ie=(0,u.t)().getSalesHistory;const ce=(0,i.C)();let de=(0,o.KR)(0),pe=(0,o.KR)(!1),me=(0,o.KR)(!0);const xe=()=>pe.value=!pe.value;let fe=(0,o.KR)(0);let ke=(0,o.KR)(!1),ve=(0,o.KR)("");const ye=(0,o.KR)(!1);let ge=(0,o.KR)(""),he=(0,o.KR)(""),be=(0,o.KR)(0),we=null,Ee=(0,o.KR)(!1);const Re=()=>{Ee.value=!Ee.value},Ce=()=>{if(!he.value||!be.value)return ye.value=!0,void(ge.value="Verifica haber rellenado todos los campos");ye.value=!1,me.value=!1;const e=(0,o.Kh)({expenseReason:he.value,expenseAmount:be.value,expenseDate:d()().format("DD/MM/YY HH:mm:ss")});we&&clearTimeout(we);try{ke.value=!1,ue.pushUserNewExpense(e),he.value="",be.value=0,ye.value=!1,console.log("Expense added successfully",ue.getUserExpenses),fe.value=ue.getExpensesReduced,Le.value=de.value-ue.getExpensesReduced,ke.value=!0,ve.value="Gasto agregado",we=setTimeout((()=>{ke.value=!1,me.value=!0}),2e3)}catch(t){console.error("Could not add expenses",t)}};let Le=(0,o.KR)(0),Se=(0,o.KR)(!1);const Xe=()=>{Se.value=!Se.value,Se.value?pe.value=!0:pe.value=!1},He=()=>{try{if(ue.getSalesHistory.length<1)return void alert("Necesitas tener al menos una venta");if(ue.getUserExpenses.length<1)return ce.pushNewBackupSale(ie),ce.pushNewBackupExpense([{expenseReason:"No hay gastos",expenseAmount:0,expenseDate:d()().format("DD/MM/YY HH:mm:ss")}]),ue.pushNewFinancialHistory({totalSale:de.value,totalExpenses:fe.value,finalBalance:Le.value}),console.log("History Backup:",(0,i.C)().getBackupsExpensesHistory),console.log("SalesStore before deletion:",ue.getSalesHistory),ue.resetSalesHistory(),ue.resetUserExpenses(),console.log("SalesStore after deletion:",ue.getSalesHistory),ie=ue.getSalesHistory,ue.resetTotalEarnedHistory(),ue.resetTotalEarned(),de.value=ue.getTotalEarned,void p.A.push({name:"history"});ce.pushNewBackupSale(ue.getSalesHistory),ce.pushNewBackupExpense(ue.getUserExpenses),ue.pushNewFinancialHistory({totalSale:de.value,totalExpenses:fe.value,finalBalance:Le.value}),ue.resetTotalEarnedHistory(),ue.resetTotalEarned(),de.value=ue.getTotalEarned,ue.resetSalesHistory(),ue.resetUserExpenses(),ie=[],p.A.push({name:"history"})}catch(e){console.log("Error while trying to push backup")}};return(0,l.sV)((()=>{ie.length>0&&(de.value=ue.getTotalEarned,fe.value=ue.getExpensesReduced,Le.value=ue.getTotalEarned-ue.getExpensesReduced),console.log("total gastos: ",ue.getUserExpenses)})),(e,s)=>{const u=(0,l.g2)("v-icon"),i=(0,l.g2)("RouterLink");return(0,l.uX)(),(0,l.CE)("div",x,[(0,l.bF)(r.A,null,{main:(0,l.k6)((()=>[f,(0,l.Lk)("div",k,[v,(0,l.Lk)("div",y,[(0,l.Lk)("p",g,(0,a.v_)((0,o.R1)(t)),1)]),(0,l.bF)(i,{to:{name:"home"},class:"flex items-center gap-2 p-1 ml-3 bg-white shadow-md animate-delay-200 animate-fade-down min-w-32 text-sky-800 rounded-2xl max-w-44"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{name:"hi-solid-home",color:"#246D93",scale:"1.6"}),h])),_:1}),(0,l.Lk)("div",b,[(0,l.Lk)("div",w,[(0,l.bF)(u,{class:"pr-1 bg-white cursor-pointer rounded-l-3xl",name:"gi-receive-money",scale:"1.5",color:"#246D93"}),E,(0,l.Lk)("div",R,[(0,o.R1)(pe)?((0,l.uX)(),(0,l.CE)("h2",C,"$"+(0,a.v_)((0,o.R1)(de)),1)):(0,l.Q3)("",!0),(0,o.R1)(pe)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("h2",L,"$****")),(0,o.R1)(pe)?((0,l.uX)(),(0,l.Wv)(u,{key:2,class:"cursor-pointer",onClick:xe,name:"io-eye-off-sharp",scale:"1.5",color:"#075985"})):(0,l.Q3)("",!0),(0,o.R1)(pe)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(u,{key:3,class:"cursor-pointer",onClick:xe,name:"io-eye-sharp",scale:"1.5",color:"#075985"}))])])]),(0,l.Lk)("div",S,[(0,l.Lk)("div",{onClick:Xe,class:"flex p-1 px-2 bg-white shadow-md cursor-pointer rounded-2xl"},[X,(0,l.Lk)("div",H,[(0,o.R1)(Se)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(u,{key:0,class:"cursor-pointer",name:"md-expandcircledown-round",scale:"1.5",color:"#075985"})),(0,o.R1)(Se)?((0,l.uX)(),(0,l.Wv)(u,{key:1,class:"cursor-pointer",name:"md-expandcircledown-round",scale:"1.5",color:"#075985",flip:"vertical"})):(0,l.Q3)("",!0)])])]),(0,l.Lk)("div",B,[(0,o.R1)(Se)?((0,l.uX)(),(0,l.CE)("section",Q,[(0,l.Lk)("div",K,[(0,l.Lk)("div",_,[(0,l.bF)(u,{class:"cursor-pointer",name:"gi-pay-money",scale:"1.5",color:"white"}),N,(0,o.R1)(pe)?((0,l.uX)(),(0,l.CE)("h2",j,"$"+(0,a.v_)((0,o.R1)(fe)),1)):(0,l.Q3)("",!0),(0,o.R1)(pe)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("h2",A,"$****"))]),(0,l.Lk)("div",F,[(0,l.bF)(u,{class:"cursor-pointer",name:"gi-money-stack",scale:"1.5",color:"white"}),T,(0,o.R1)(pe)?((0,l.uX)(),(0,l.CE)("h2",D,"$"+(0,a.v_)((0,o.R1)(Le)),1)):(0,l.Q3)("",!0),(0,o.R1)(pe)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("h2",U,"$****"))])]),(0,o.R1)(me)?((0,l.uX)(),(0,l.Wv)(m.A,{key:0,labels:["Gastos","Balance Final"],dataSet:[(0,o.R1)(fe),(0,o.R1)(Le)]},null,8,["dataSet"])):(0,l.Q3)("",!0),(0,l.Lk)("div",$,[(0,l.Lk)("div",V,[G,(0,o.R1)(Ee)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(u,{key:0,class:"cursor-pointer",onClick:Re,name:"md-addbox",scale:"1.2",color:"#075985"})),(0,o.R1)(Ee)?((0,l.uX)(),(0,l.Wv)(u,{key:1,class:"cursor-pointer",onClick:Re,name:"ri-checkbox-indeterminate-fill",scale:"1.2",color:"#075985"})):(0,l.Q3)("",!0)]),(0,o.R1)(Ee)?((0,l.uX)(),(0,l.CE)("section",I,[W,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>(0,o.i9)(he)?he.value=e:he=e),class:"w-full border-b-[1px] border-sky-800 shadow-sm focus:outline-none",type:"text",placeholder:"Compré agua y gas"},null,512),[[n.Jo,(0,o.R1)(he)]]),M,(0,l.Lk)("div",Y,[q,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>(0,o.i9)(be)?be.value=e:be=e),class:"w-full border-b-[1px] border-sky-800 shadow-sm focus:outline-none",type:"number",placeholder:"250",min:"0"},null,512),[[n.Jo,(0,o.R1)(be)]])]),(0,l.Lk)("div",null,[(0,o.R1)(ke)?((0,l.uX)(),(0,l.CE)("p",P,(0,a.v_)((0,o.R1)(ve))+"!",1)):(0,l.Q3)("",!0),ye.value?((0,l.uX)(),(0,l.CE)("p",J,(0,a.v_)((0,o.R1)(ge))+"!",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",null,[(0,l.Lk)("button",{onClick:Ce,class:"p-1 text-xl text-white rounded-lg bg-sky-700 font-poppins"},"Añadir Gasto")])])):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",{class:"flex justify-end w-full pr-6 mt-9"},[(0,l.Lk)("button",{onClick:He,class:"p-1 text-sm text-white rounded-lg bg-sky-700 font-poppins min-w-48"},"Guardar y Reestablecer Datos")]),(0,l.Lk)("section",O,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,o.R1)(ie),((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"box-border relative flex flex-col items-start w-11/12 px-2 transition-transform duration-300 ease-out bg-white shadow-md tex8-black py-7 rounded-xl justify-evenly min-w-24 min-h-44 font-poppins hover:border-sky-800 hover:border hover:scale-105"},[(0,l.Lk)("div",z,[(0,l.Lk)("p",Z,"Fecha: "+(0,a.v_)(e[0].itemDate),1)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"flex items-center justify-center w-full"},[e.itemName&&"Otros"!==e.itemName?((0,l.uX)(),(0,l.CE)("div",ee,[e.itemAmount?((0,l.uX)(),(0,l.CE)("p",te,(0,a.v_)(e.itemAmount),1)):(0,l.Q3)("",!0),e.itemName?((0,l.uX)(),(0,l.CE)("p",se,(0,a.v_)(e.itemName),1)):(0,l.Q3)("",!0),e.itemSubtotal?((0,l.uX)(),(0,l.CE)("p",le,"$"+(0,a.v_)(e.itemSubtotal),1)):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),e.itemName&&"Otros"===e.itemName?((0,l.uX)(),(0,l.CE)("div",ae,[e.itemName?((0,l.uX)(),(0,l.CE)("p",oe,(0,a.v_)(e.itemName),1)):(0,l.Q3)("",!0),e.itemSubtotal?((0,l.uX)(),(0,l.CE)("p",ne,"$"+(0,a.v_)(e.itemSubtotal),1)):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])))),128)),(0,l.Lk)("p",re,"Total: $"+(0,a.v_)(e[0].grandTotal)+".00 ",1)])))),128))])])])),_:1})])}}});const ie=ue;var ce=ie}}]);
//# sourceMappingURL=sales.b5140637.js.map